{%- comment -%}
  Smart Hero — one include, auto variants:
  - home-hero
  - post-hero
  - page-hero
  - hero-default
{%- endcomment -%}

{%- assign _kind = 'hero-default' -%}
{%- if page.layout == 'home' -%}
  {%- assign _kind = 'home-hero' -%}
{%- elsif page.layout == 'post' or page.collection == 'posts' -%}
  {%- assign _kind = 'post-hero' -%}
{%- elsif page.layout == 'page' -%}
  {%- assign _kind = 'page-hero' -%}
{%- endif -%}

<section class="site-hero {{ _kind }}" role="region" aria-label="Hero">
  <!-- Dense grid lines background -->
  <div class="hero-surface" aria-hidden="true">
    <div class="hero-gridlines" aria-hidden="true"></div>
  </div>

  {%- if _kind == 'home-hero' -%}
  <!-- ====================== HOME ====================== -->
  <div class="container">
    <div class="hero-grid hero-grid--home">
      {%- assign home_img = page.feature_image | default: site.collections.posts.feature_image -%}
      <figure class="hero-media">
        {% if home_img %}
          <img src="{{ home_img }}" alt="" loading="eager">
        {% else %}
          <div class="media-placeholder" aria-hidden="true"></div>
        {% endif %}
      </figure>

      <div class="home-copy">
        <div class="home-titleblock">
          <h1 class="hero-title">{{ page.title | default: site.title | default: "Welcome" }}</h1>
          {% if site.description %}
            <p class="hero-sub">{{ site.description }}</p>
          {% endif %}
        </div>

        <div class="home-meta">
          {% if site.location %}
            <span class="chip chip--soft"><i class="ph-bold ph-map-pin"></i>{{ site.location }}</span>
          {% endif %}
          {% if site.timezone %}
            <span class="chip chip--soft"><i class="ph-bold ph-clock"></i>{{ site.timezone }}</span>
          {% endif %}
          {% if site.work and site.work.company %}
            {% if site.work.url %}
              <a class="chip chip--link" href="{{ site.work.url }}" target="_blank" rel="noopener">
                <i class="ph-bold ph-briefcase"></i>{{ site.work.role | default: 'Role' }} @ {{ site.work.company }}
              </a>
            {% else %}
              <span class="chip chip--soft"><i class="ph-bold ph-briefcase"></i>{{ site.work.role | default: 'Role' }} @ {{ site.work.company }}</span>
            {% endif %}
          {% endif %}
          {% if site.repo %}
            <a class="chip chip--link" href="{{ site.repo }}" target="_blank" rel="noopener"><i class="ph-bold ph-github-logo"></i>GitHub</a>
          {% endif %}
        </div>

        {% if site.social_links %}
        <nav class="hero-social" aria-label="Social links">
          {% if site.social_links.Twitter %}<a href="{{ site.social_links.Twitter }}" aria-label="Twitter" target="_blank" rel="noopener"><i class="ph-bold ph-twitter-logo"></i></a>{% endif %}
          {% if site.social_links.LinkedIn %}<a href="{{ site.social_links.LinkedIn }}" aria-label="LinkedIn" target="_blank" rel="noopener"><i class="ph-bold ph-linkedin-logo"></i></a>{% endif %}
          {% if site.social_links.GitHub %}<a href="{{ site.social_links.GitHub }}" aria-label="GitHub" target="_blank" rel="noopener"><i class="ph-bold ph-github-logo"></i></a>{% endif %}
          {% if site.social_links.RSS %}<a href="{{ site.baseurl }}{{ site.social_links.RSS }}" aria-label="RSS"><i class="ph-bold ph-rss"></i></a>{% endif %}
        </nav>
        {% endif %}

        <div class="hero-ad">
          {% include adsense.html type="horizontal" %}
        </div>
      </div>
    </div>
  </div>

  {%- elsif _kind == 'post-hero' -%}
  <!-- ====================== POST ====================== -->
  <div class="container container--narrow">
    <div class="hero-grid hero-grid--post">
      <figure class="hero-media hero-media--post">
        {% if page.feature_image %}
          <img src="{{ page.feature_image }}" alt="" loading="eager">
        {% else %}
          <div class="media-placeholder" aria-hidden="true"></div>
        {% endif %}
      </figure>

      <div class="post-copy">
        <div class="post-head">
          <div class="author-bullet" aria-hidden="true"></div>
          <div>
            <h1 class="hero-title">{{ page.title }}</h1>
            <div class="hero-meta">
              {% assign date_format = site.date_format | default: "%d %b %Y" %}
              <time datetime="{{ page.date | date_to_xmlschema }}"><i class="ph-bold ph-calendar-blank"></i>{{ page.date | date: date_format }}</time>

              {% if page.categories and page.categories.size > 0 %}
                <span class="dot">•</span>
                <span class="cats">
                  {% for c in page.categories %}
                    <a class="chip" href="{{ '/categories/#' | append: c | downcase | slugify | relative_url }}"><i class="ph-bold ph-tag"></i>{{ c }}</a>{% unless forloop.last %}<span>,</span>{% endunless %}
                  {% endfor %}
                </span>
              {% endif %}

              {% if page.tags and page.tags.size > 0 %}
                <span class="dot">•</span>
                <span class="cats">
                  {% for t in page.tags %}
                    <a class="chip chip--ghost" href="{{ '/tags/#' | append: t | downcase | slugify | relative_url }}"><i class="ph-bold ph-hash"></i>{{ t }}</a>{% unless forloop.last %}<span>,</span>{% endunless %}
                  {% endfor %}
                </span>
              {% endif %}

              {% assign words = page.content | number_of_words %}
              {% assign mins = words | divided_by:200 | plus:1 %}
              <span class="dot">•</span><span class="read"><i class="ph-bold ph-hourglass-low"></i>{{ mins }} min read</span>

              {% assign author_name = page.author | default: site.author | default: site.social.name %}
              {% if author_name %}
                <span class="dot">•</span><span class="by"><i class="ph-bold ph-user"></i>{{ author_name }}</span>
              {% endif %}
            </div>
            {% if page.subtitle %}<p class="hero-sub">{{ page.subtitle }}</p>{% endif %}
          </div>
        </div>

        <div class="hero-ad hero-ad--below">
          {% include adsense.html type="in_article" %}
        </div>
      </div>
    </div>
  </div>

  {%- elsif _kind == 'page-hero' -%}
  <!-- ====================== PAGE ====================== -->
  <div class="container container--narrow">
    <nav class="hero-breadcrumbs" aria-label="Breadcrumb">
      <a href="{{ '/' | relative_url }}"><i class="ph-bold ph-house"></i> Home</a>
      <span class="crumb-sep">/</span>
      <span aria-current="page">{{ page.title | default: 'Page' }}</span>
    </nav>

    <div class="hero-grid hero-grid--page">
      {% if page.feature_image %}
      <figure class="hero-media hero-media--page">
        <img src="{{ page.feature_image }}" alt="" loading="eager">
      </figure>
      {% endif %}

      <div class="page-copy">
        <div class="page-head">
          <div class="author-bullet" aria-hidden="true"></div>
          <div>
            <h1 class="hero-title">{{ page.title }}</h1>
            {% if page.subtitle %}<p class="hero-sub">{{ page.subtitle }}</p>{% endif %}
            <div class="hero-badges">
              {% if page.category %}<span class="chip chip--soft"><i class="ph-bold ph-tag"></i>{{ page.category }}</span>{% endif %}
              {% if page.tags and page.tags.size > 0 %}
                {% for t in page.tags %}<span class="chip chip--ghost"><i class="ph-bold ph-hash"></i>{{ t }}</span>{% endfor %}
              {% endif %}
              {% assign author_name = page.author | default: site.author | default: site.social.name %}
              {% if author_name %}<span class="chip"><i class="ph-bold ph-user"></i>{{ author_name }}</span>{% endif %}
            </div>
          </div>
        </div>

        <div class="hero-ad hero-ad--below">
          {% include adsense.html type="horizontal" %}
        </div>
      </div>
    </div>
  </div>

  {%- else -%}
  <!-- ====================== DEFAULT ====================== -->
  <div class="container container--narrow">
    <div class="hero-grid hero-grid--default">
      <div class="default-copy">
        <h1 class="hero-title">{{ page.title | default: site.title }}</h1>
        {% if page.subtitle or site.description %}
          <p class="hero-sub">{{ page.subtitle | default: site.description }}</p>
        {% endif %}
      </div>
    </div>
  </div>
  {%- endif -%}
</section>
