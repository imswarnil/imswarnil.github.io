// ======================================================================
// Smart Hero — lighter chrome, grid-only background, image-first mobile
// ======================================================================

@function fluid-clamp($min, $fluid, $max) { @return unquote("clamp(#{$min}, #{$fluid}, #{$max})"); }

/* Shell */
.site-hero {
  position: relative;
  padding: #{fluid-clamp($sp-6, 4vw, $sp-10)} 0 $sp-8; // tighter default
  overflow: clip;

  .hero-surface {
    position: absolute; inset: 0; z-index: 0; pointer-events: none;

    /* Grid lines only (no dots) */
    .hero-gridlines {
      position: absolute; inset: 0;
      background-image:
        linear-gradient(to right, rgba(120,120,120,.16) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(120,120,120,.14) 1px, transparent 1px);
      background-size: 44px 44px;
      @include theme-block-dark {
        background-image:
          linear-gradient(to right, rgba(255,255,255,.18) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(255,255,255,.16) 1px, transparent 1px);
      }
    }
  }
}

/* Layout grids */
.hero-grid       { position: relative; z-index: 1; display: grid; gap: $sp-8; align-items: center; }
.hero-grid--home { grid-template-columns: 1.05fr .95fr; @media (max-width: $bp-lg) { grid-template-columns: 1fr; gap: $sp-6; } }
.hero-grid--post { grid-template-columns: 1fr; gap: $sp-6; }
.hero-grid--page { grid-template-columns: 1fr .9fr; @media (max-width: $bp-lg) { grid-template-columns: 1fr; gap: $sp-6; } }
.hero-grid--default { grid-template-columns: 1fr; }

/* Media blocks */
.hero-media {
  order: -1; /* image first on mobile naturally */
  height: #{fluid-clamp(360px, 60vh, 720px)}; /* full-height feel on home */
  width: 100%;
  border-radius: $radius-6; overflow: hidden;
  box-shadow: 0 24px 60px -28px rgba(0,0,0,.35);
  @include theme-block-dark { box-shadow: 0 28px 80px -30px rgba(0,0,0,.6); }

  img { width: 100%; height: 100%; object-fit: cover; display: block; }
  .media-placeholder {
    width: 100%; height: 100%;
    background: repeating-linear-gradient(45deg, rgba(0,0,0,.08) 0 12px, transparent 12px 24px);
    @include theme-block-dark { background: repeating-linear-gradient(45deg, rgba(255,255,255,.12) 0 12px, transparent 12px 24px); }
  }
}

/* Slightly shorter media on post/page to tighten hero height */
.hero-media--post,
.hero-media--page {
  height: #{fluid-clamp(240px, 40vh, 520px)};
}

/* Copy groups — airy, not boxy */
.home-copy, .post-copy, .page-copy, .default-copy { padding: #{fluid-clamp($sp-4, 2.6vw, $sp-8)} 0; }

/* Titles / sub */
.hero-title {
  margin: 0 0 $sp-2;
  font-size: #{fluid-clamp($fs-6, unquote("calc(2vw + 1rem)"), $fs-9)};
  line-height: 1.05; letter-spacing: -.01em;
  @include theme-block      { color: tone(contrast, light); }
  @include theme-block-dark { color: tone(contrast, dark);  }
}
.hero-sub {
  margin: 0;
  font-size: #{fluid-clamp($fs-3, unquote("calc(.8vw + 0.9rem)"), $fs-5)};
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* Home head (no avatar, no header element) */
.home-head { display: block; margin-bottom: $sp-2; }
.home-titleblock { display: grid; gap: $sp-2; }

/* Chips / badges */
.home-meta, .hero-badges {
  display: flex; flex-wrap: wrap; gap: $sp-3; margin-top: $sp-3;
}
.chip {
  display: inline-flex; align-items: center; gap: .45rem;
  padding: .35rem .75rem; border-radius: $radius-pill; font-size: $fs-2; text-decoration: none;
  @include theme-block      { color: tone(contrast, light); background: rgba(0,0,0,.06); }
  @include theme-block-dark { color: tone(contrast, dark);  background: rgba(255,255,255,.12); }
  i { font-size: $fs-3; line-height: 1; }
}
.chip--soft  { @include theme-block { background: rgba(0,0,0,.06); } @include theme-block-dark { background: rgba(255,255,255,.12); } }
.chip--ghost { @include theme-block { background: rgba(0,0,0,.04); } @include theme-block-dark { background: rgba(255,255,255,.10); } }
.chip--link:hover { text-decoration: underline; }

/* Social (home) */
.hero-social { margin-top: $sp-5; display: flex; gap: $sp-3;
  a {
    display:inline-grid; place-items:center; width: 2rem; height: 2rem; border-radius: 50%;
    font-size: $fs-4; transition: transform $dur-1 $ease-in-out, background-color $dur-1 $ease-in-out;
    @include theme-block      { color: tone(contrast, light); background: rgba(0,0,0,.06); }
    @include theme-block-dark { color: tone(contrast, dark);  background: rgba(255,255,255,.12); }
    &:hover { transform: translateY(-2px); }
  }
}

/* Post / Page heads — author bullet instead of avatar */
.post-head, .page-head {
  display: grid; grid-template-columns: auto 1fr; gap: $sp-4; align-items: center; margin-bottom: $sp-2;
}
.author-bullet {
  width: 14px; height: 14px; border-radius: 50%;
  background: linear-gradient(135deg, currentColor 0%, transparent 100%);
  @include theme-block      { color: tone(contrast, light); }
  @include theme-block-dark { color: tone(contrast, dark);  }
  box-shadow: 0 6px 16px -6px rgba(0,0,0,.35);
}

/* Meta row (post) */
.hero-meta {
  display: flex; align-items: center; gap: $sp-2; flex-wrap: wrap;
  margin-top: $sp-1; margin-bottom: $sp-1; font-size: $fs-2;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
  time, .read, .by { display: inline-flex; align-items: center; gap: .4rem; }
  .dot { opacity: .5; }
  .cats { display: inline-flex; align-items: center; gap: .25rem; }
}

/* Breadcrumbs (page) */
.hero-breadcrumbs {
  position: relative; z-index: 1; margin-bottom: $sp-3; font-size: $fs-2;
  display: flex; gap: $sp-2; align-items: center; flex-wrap: wrap;
  a {
    text-decoration: none; display: inline-flex; align-items: center; gap: .4rem;
    @include theme-block      { color: tone(secondary, light); }
    @include theme-block-dark { color: tone(secondary, dark);  }
    &:hover { text-decoration: underline; }
  }
  .crumb-sep { opacity: .5; }
}

/* Ads block (optional) */
.hero-ad { margin-top: $sp-5; }
.hero-ad--below { margin-top: $sp-4; }

/* ===========================================================
   HERO FIXES — alignment + responsive widths
   Append AFTER your existing _hero.scss
   =========================================================== */

/* 1) HOME: image should sit perfectly on mobile and feel full-height on larger screens */
.hero--home .hero-grid {
  align-items: stretch; /* image and copy align nicely */
}

/* The media wrapper: good height on desktop, sane on mobile */
.hero--home .hero-media {
  /* Desktop/tablet: tall, immersive */
  height: #{unquote("clamp(420px, 68vh, 860px)")};
  border-radius: $radius-6;
  overflow: hidden;
  box-shadow: 0 24px 60px -28px rgba(0,0,0,.35);
  @include theme-block-dark { box-shadow: 0 28px 80px -30px rgba(0,0,0,.6); }

  /* Mobile: stable aspect & centered crop */
  @media (max-width: $bp-lg) {
    height: auto;                /* let aspect-ratio control height */
    aspect-ratio: 16 / 9;        /* avoids super-tall mobile headers */
    border-radius: $radius-5;
  }

  img {
    width: 100%; height: 100%;
    display: block;
    object-fit: cover;
    object-position: center center; /* adjust if you want: center top, etc. */
  }

  .media-placeholder {
    width: 100%; height: 100%;
    @media (max-width: $bp-lg) { aspect-ratio: 16/9; }
  }
}

/* Keep the copy comfy but not boxy; ensure spacing below image on mobile */
.hero--home .home-copy {
  padding: #{unquote("clamp(#{$sp-4}, 2.6vw, #{$sp-8})")} 0;
  @media (max-width: $bp-lg) { padding-top: $sp-4; }
}

/* 2) NARROWER CONTENT for post / page / default
      (Home stays wide & immersive, others read-friendly) */
.hero--post > .container,
.hero--page > .container,
.hero--default > .container {
  /* Narrow while respecting global gutters */
  max-width: 860px;   /* tune if you want tighter */
}

/* 3) POST / PAGE media should be shorter than home (read-first) */
.hero--post .hero-media,
.hero--page .hero-media {
  height: #{unquote("clamp(220px, 40vh, 520px)")};
  @media (max-width: $bp-lg) {
    height: auto;
    aspect-ratio: 16/9;
    border-radius: $radius-5;
  }
  img { object-fit: cover; object-position: center center; }
}

/* 4) Tighten vertical rhythm on post/page heroes */
.hero--post .post-copy,
.hero--page .page-copy,
.hero--default .default-copy {
  padding: #{unquote("clamp(#{$sp-3}, 2vw, #{$sp-6})")} 0;
}

/* 5) Author bullet & meta spacing — compact & aligned */
.post-head, .page-head {
  gap: $sp-3;
  align-items: center;
  margin-bottom: $sp-1;
}
.author-bullet {
  width: 12px; height: 12px; border-radius: 50%;
  background: currentColor;
  opacity: .85;
  box-shadow: 0 6px 16px -6px rgba(0,0,0,.35);
}

/* 6) Background: GRID LINES ONLY (no dots), ensure visibility on both themes */
.site-hero .hero-surface .hero-gridlines {
  background-image:
    linear-gradient(to right, rgba(120,120,120,.16) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(120,120,120,.14) 1px, transparent 1px);
  background-size: 44px 44px;

  @include theme-block-dark {
    background-image:
      linear-gradient(to right, rgba(255,255,255,.18) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255,255,255,.16) 1px, transparent 1px);
  }
}

/* 7) Small polish: make chips wrap nicely on narrow screens */
.home-meta, .hero-badges, .hero-meta {
  row-gap: $sp-2;
}
