// ===============================
// Local tokens (safe defaults)
// ===============================
$bp-sm: 540px;
$bp-md: 768px;
$bp-lg: 992px;

$sp-2: 0.25rem;
$sp-4: 0.5rem;
$sp-6: 0.75rem;
$sp-7: 1rem;
$sp-8: 1.25rem;
$sp-10: 1.5rem;
$sp-12: 2rem;

$radius-3: 10px;
$radius-4: 14px;
$radius-pill: 999px;

$fs-small: 0.875rem;
$fs-large: 1.125rem;
$fw-medium: 500;
$fw-semibold: 600;

$navbar-height: 58px;
$island-width: 1100px;     // max container width
$container-pad: 1rem;      // side padding; no vw here

$shadow-light: 0 10px 30px -10px rgba(0,0,0,0.2), 0 4px 10px -6px rgba(0,0,0,0.16);
$shadow-dark:  0 20px 60px -10px rgba(0,0,0,0.4),  0 4px 20px -8px rgba(0,0,0,0.4);

// Light
$c-accent: #000;
$c-contrast: #000;
$c-bg: #fff;
$c-bg-100: #f3f3f3;
$c-bg-200: #ededed;
$c-fg: #4d4d4d;
$c-secondary: #757575;
$c-border: rgba(0,0,0,0.2);

// Dark
$cd-accent: #fff;
$cd-contrast: #fff;
$cd-bg: #111113;
$cd-bg-100: #1a1a1c;
$cd-bg-200: #2c2c2f;
$cd-fg: #c9c9c9;
$cd-secondary: #9a9a9a;
$cd-border: rgba(255,255,255,0.12);

// ===============================
// Mixins
// ===============================
@mixin container {
  width: 100%;
  max-width: $island-width;
  margin-left: auto; margin-right: auto;
  padding-left: $container-pad; padding-right: $container-pad;
}

@mixin button-base {
  display:inline-flex; align-items:center; justify-content:center; gap:.5em;
  min-height: 2.5rem; padding: $sp-4 $sp-8; font-size: $fs-small; font-weight: $fw-semibold;
  border: 1px solid transparent; border-radius: $radius-pill; cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, background-color .2s ease, color .2s ease;
}

// ===============================
// Header
// ===============================

// Spacer so content never goes under the sticky navbar
.header-spacer {
  height: $navbar-height;
  @media (min-width: $bp-md) { height: calc(#{$navbar-height} + #{$sp-8}); }
}

// NAVBAR
#site-navbar {
  position: sticky; top: $sp-8; z-index: 1000;
  @include container;
  display:flex; align-items:center; justify-content:space-between;
  padding: $sp-4 $sp-6; border-radius: 24px;
  border: 1px solid $c-border;
  box-shadow: $shadow-light;
  background-color: rgba(255,255,255,.72);
  backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);

  // Dark state
  html[data-color-scheme="dark"] & {
    border-color: $cd-border;
    box-shadow: $shadow-dark;
    background-color: rgba(17,17,19,.72);
  }

  .navbar-brand {
    display:flex; align-items:center; gap:$sp-6; text-decoration:none;
    .navbar-avatar {
      width: 36px; height: 36px; border-radius: 50%; object-fit: cover;
      border: 2px solid $c-border;
      html[data-color-scheme="dark"] & { border-color: $cd-border; }
    }
    .brand-text { display:grid; line-height: 1.1; }
    .logo { font-size: $fs-large; font-weight: $fw-semibold; color: $c-contrast;
      html[data-color-scheme="dark"] & { color: $cd-contrast; }
    }
    .logo-sub { font-size: .8125rem; color: $c-secondary;
      html[data-color-scheme="dark"] & { color: $cd-secondary; }
    }
  }

  .navbar-menu {
    ul { display:flex; align-items:center; gap:$sp-2; margin:0; padding:0; list-style:none; }
    a {
      display:inline-flex; align-items:center; gap:.5em; line-height: 1; // keeps icons aligned
      font-size: $fs-small; font-weight: $fw-medium;
      padding: $sp-4 $sp-6; border-radius: $radius-pill;
      color: $c-secondary; transition: background-color .2s ease, color .2s ease, transform .15s ease;
      html[data-color-scheme="dark"] & { color: $cd-secondary; }
      &:hover, &.active {
        color: $c-contrast; background: $c-bg-100;
        html[data-color-scheme="dark"] & { color: $cd-contrast; background: $cd-bg-100; }
      }
      i { font-size: 1.125em; }
    }
  }

  .navbar-actions {
    display:flex; align-items:center; gap:$sp-4;

    .cta-github {
      @include button-base;
      background: #000; color: #fff;
      html[data-color-scheme="dark"] & { background: #fff; color: #000; }
      i { font-size: 1.05em; }
      span { display:inline-block; }
    }

    .button-icon { @include button-base; width: 2.25rem; height: 2.25rem; padding: $sp-4; border-radius: 50%; }
    .button-transparent {
      @include button-base; background: transparent; color: $c-secondary; border-color: $c-border;
      &:hover { background: $c-bg-100; color: $c-contrast; }
      html[data-color-scheme="dark"] & {
        color: $cd-secondary; border-color: $cd-border;
        &:hover { background: $cd-bg-100; color: $cd-contrast; }
      }
    }
  }

  .mobile-menu-toggle { display:none; }

  // theme toggle button
  #theme-toggle {
    position: relative; overflow: hidden;
    background: $c-bg-200; border: 1px solid $c-border; color: $c-secondary;
    html[data-color-scheme="dark"] & { background: $cd-bg-200; border-color: $cd-border; color: $cd-fg; }
    i {
      font-size: 1.125em; position:absolute; inset:0; margin:auto; width:1em; height:1em;
      opacity:0; transform: scale(.85);
      transition: transform .3s cubic-bezier(.25,1,.5,1), opacity .2s ease;
    }
    html[data-color-scheme="light"] & .icon-sun { opacity:1; transform: scale(1); }
    html[data-color-scheme="dark"]  & .icon-moon { opacity:1; transform: scale(1); }
  }

  // responsive
  @media (max-width: $bp-lg) {
    .navbar-menu { display:none; }
    .mobile-menu-toggle { display:inline-flex; }
    // width & padding handled by @include container (no vw math)
  }

  // make the Star text hide on very small screens
  @media (max-width: $bp-md) {
    .cta-github span { display:none; }
  }
}

// MOBILE BENTO PANEL
#mobile-panel {
  position: relative; z-index: 950;
  @include container;
  margin-top: -12px;
  border-radius: 24px; border: 1px solid $c-border; border-top: 0;
  box-shadow: $shadow-light; overflow: hidden;
  max-height: 0; opacity: 0; transform: translateY(-6px) scale(.992); pointer-events: none;
  transition: max-height .5s cubic-bezier(.25,1,.5,1), opacity .3s ease, transform .4s cubic-bezier(.25,1,.5,1);
  background-color: rgba(255,255,255,.75);

  html[data-color-scheme="dark"] & {
    border-color: $cd-border; box-shadow: $shadow-dark;
    background-color: rgba(17,17,19,.75);
  }

  &.is-open { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; border-top-left-radius: 0; border-top-right-radius: 0; }
  &.is-open::before {
    content:""; position:absolute; inset:0 0 auto 0; height:1px; top:0;
    background: linear-gradient(90deg, transparent, rgba(0,0,0,.08), transparent);
    html[data-color-scheme="dark"] & { background: linear-gradient(90deg, transparent, rgba(255,255,255,.08), transparent); }
  }

  .island-panel__inner { padding: $sp-12 $sp-10; display:grid; gap:$sp-10; }

  .bento-grid {
    display:grid; grid-template-columns: repeat(2, 1fr); gap: 12px;
    @media (min-width: $bp-sm) { grid-template-columns: repeat(3, 1fr); }
  }
  .bento-card {
    display:flex; align-items:center; gap:12px; padding:14px; border-radius: 14px;
    border: 1px solid $c-border; background: $c-bg;
    transition: transform .15s ease, background .2s ease;
    &:hover { transform: translateY(-2px); background: $c-bg-100; }
    html[data-color-scheme="dark"] & {
      border-color: $cd-border; background: $cd-bg-100;
      &:hover { background: $cd-bg-200; }
    }
  }
  .bento-icon {
    width:38px; height:38px; display:grid; place-items:center; border-radius: 12px; border:1px solid $c-border;
    html[data-color-scheme="dark"] & { border-color: $cd-border; }
  }
  .bento-title { font-weight: $fw-semibold; color: $c-contrast; html[data-color-scheme="dark"] & { color: $cd-contrast; } }
  .bento-sub { font-size: .8rem; color: $c-secondary; html[data-color-scheme="dark"] & { color: $cd-secondary; } }

  @media (min-width: $bp-lg) { display:none; } // hide on desktop
}
