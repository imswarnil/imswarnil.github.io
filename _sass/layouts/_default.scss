// ======================================================================
// assets/css/default.scss
// Island-style default layout using ONLY tokens/mixins from _variables.scss
// ======================================================================

// ---------- Local derived values (pure rem math, no calc() mixing) ----------
$hero-w: 57.5rem; // 68.75rem (island) - 11.25rem; narrower than navbar

// ---------- Main container ----------
.main {
  @include container;                    // centered with island width & gutters
  padding-block: clamp($sp-8, 3vw, $sp-16);
  display: grid;
  gap: $sp-7;

  // soft page-level rhythm without touching global tags
  & > * + * {
    margin-top: $sp-7;
  }
}

// top offset helper when mobile header is fixed
.main--offset {
  padding-top: calc(#{$navbar-height} + #{$sp-6});
}

// narrower reading column helper
.main--narrow {
  width: $hero-w;
  max-width: 100%;
  margin-inline: auto;
}

// ---------- Island section (opt-in wrapper for blocks) ----------
.main-section {
  // light / dark theming via html[data-color-scheme] guard
  @include theme-block {
    background-color: tone(surface, light);
    border: 1px solid tone(border, light);
    box-shadow: $shadow-light;
    color: tone(foreground, light);
  }
  @include theme-block-dark {
    background-color: tone(surface, dark);
    border: 1px solid tone(border, dark);
    box-shadow: $shadow-dark;
    color: tone(foreground, dark);
  }

  border-radius: $radius-6;
  padding: clamp($sp-8, 1.6vw, $sp-16);
  backdrop-filter: blur(10px);
}

// tighter variant
.main-section--tight {
  padding: clamp($sp-7, 1.2vw, $sp-12);
  border-radius: $radius-5;
}

// ---------- Grid helpers (opt-in) ----------
.main-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: $sp-7;
}

@include mq-up($bp-md) {
  .main-grid--2 { grid-template-columns: repeat(2, 1fr); }
}
@include mq-up($bp-xl) {
  .main-grid--3 { grid-template-columns: repeat(3, 1fr); }
}

// ---------- Compact cards (opt-in) ----------
.main-card {
  @include theme-block {
    background-color: tone(background, light);
    border: 1px solid tone(border, light);
    box-shadow: $shadow-light;
    color: tone(foreground, light);
  }
  @include theme-block-dark {
    background-color: tone(background-100, dark);
    border: 1px solid tone(border, dark);
    box-shadow: $shadow-dark;
    color: tone(foreground, dark);
  }

  border-radius: $radius-5;
  padding: clamp($sp-7, 1.4vw, $sp-12);
}

// ---------- Inline actions / toolbar ----------
.main-actions {
  display: inline-flex;
  align-items: center;
  gap: $sp-7;
}

// icon button (circle)
.main-icon-btn {
  @include button-base;
  min-height: $btn-height; // from tokens
  width: $btn-height;
  padding: 0;

  @include theme-block {
    color: tone(contrast, light);
    background-color: transparent;
    border-color: tone(border, light);
  }
  @include theme-block-dark {
    color: tone(contrast, dark);
    background-color: transparent;
    border-color: tone(border, dark);
  }

  &:hover {
    @include theme-block { background-color: tone(background-100, light); }
    @include theme-block-dark { background-color: tone(background-200, dark); }
    transform: translateY(-1px);
  }
}

// ---------- Content utility wrappers (opt-in) ----------
.main-prose {
  display: grid;
  gap: $sp-7;
}

.main-prose--code {
  pre {
    font-family: $ff-mono;
    font-size: $fs-2;
    padding: $code-pad-y $code-pad-x;
    border-radius: $code-radius;
    overflow: auto;

    @include theme-block {
      background: tone(background-100, light);
      border: 1px solid tone(border, light);
      color: tone(foreground, light);
    }
    @include theme-block-dark {
      background: tone(background-100, dark);
      border: 1px solid tone(border, dark);
      color: tone(foreground, dark);
    }
  }
}

.main-prose--media {
  img {
    max-width: 100%;
    height: auto;
    border-radius: $radius-4;

    @include theme-block {
      border: 1px solid tone(border, light);
    }
    @include theme-block-dark {
      border: 1px solid tone(border, dark);
    }
  }
}

// ---------- Optional badge (tiny helper) ----------
.main-badge {
  display: inline-flex;
  align-items: center;
  gap: $sp-5;
  padding: $sp-5 $sp-7;
  border-radius: $badge-radius;
  font-size: $badge-font;
  font-weight: $fw-medium;

  @include theme-block {
    color: tone(contrast, light);
    background-color: tone(background-100, light);
    border: 1px solid tone(border, light);
  }
  @include theme-block-dark {
    color: tone(contrast, dark);
    background-color: tone(background-200, dark);
    border: 1px solid tone(border, dark);
  }
}
