/* =========================================
   HERO
========================================= */
.home-hero {
  position: relative;
  padding-block: clamp($sp-10, 4.5vw, $sp-14);
  overflow-x: clip;

  /* Fading grid background */
  &::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    opacity: .55;
    background-size: 32px 32px;
    mix-blend-mode: soft-light;
    mask-image: radial-gradient(circle at center, #000 0, #000 45%, transparent 100%);
    -webkit-mask-image: radial-gradient(circle at center, #000 0, #000 45%, transparent 100%);
  }

  @include theme-block {
    &::before {
      background-image:
        linear-gradient(
          to right,
          rgba(tone(border, light), .32) 1px,
          transparent 1px
        ),
        linear-gradient(
          to bottom,
          rgba(tone(border, light), .32) 1px,
          transparent 1px
        );
    }
  }

  @include theme-block-dark {
    &::before {
      background-image:
        linear-gradient(
          to right,
          rgba(tone(border, dark), .42) 1px,
          transparent 1px
        ),
        linear-gradient(
          to bottom,
          rgba(tone(border, dark), .42) 1px,
          transparent 1px
        );
    }
  }

  .container {
    position: relative;
    z-index: 1; // keep content above the grid
  }
}

.home-hero__grid {
  display: grid;
  gap: clamp($sp-8, 3vw, $sp-12);
  grid-template-columns: 1fr;
  align-items: center;

  @include mq-up($bp-lg) {
    grid-template-columns: 1.05fr .95fr; // keep original balance
  }
}

/* Make art first on mobile and perfectly centered */
@media (max-width: $bp-lg) {
  .home-hero__art-wrap { order: -1; }
}

.home-hero__copy {
  display: grid;
  gap: $sp-6;
  min-width: 0;
}

.home-hero__hello {
  margin: 0;
  display: flex;
  align-items: center;
  gap: $sp-5;
  font-size: $fs-4;
  font-weight: $fw-medium;

  i {
    transform-origin: 60% 60%;
    animation: wave 1.6s ease-in-out infinite;
  }
}

@keyframes wave {
  0%, 100% { transform: rotate(0); }
  20%      { rotate: 16deg; }
  40%      { rotate: -10deg; }
  60%      { rotate: 12deg; }
  80%      { rotate: -6deg; }
}

.home-hero__name {
  margin: 0;
  font-weight: $fw-bold;
  line-height: $lh-tight;
  font-size: clamp($fs-7, 6vw, $fs-10);
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: $sp-4;
}

/* Horn button next to name */
.home-hero__horn {
  border: 0;
  padding: .15rem .55rem;
  border-radius: $radius-pill;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .25rem;
  font-size: $fs-2;
  line-height: 1;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition:
    transform 160ms $ease-in-out,
    box-shadow 160ms $ease-in-out,
    background-color 160ms $ease-in-out,
    color 160ms $ease-in-out;

  @include theme-block {
    background: rgba(255,255,255,.8);
    color: tone(secondary, light);
    box-shadow: 0 4px 10px rgba(0,0,0,.06);
  }
  @include theme-block-dark {
    background: rgba(20,20,22,.9);
    color: tone(secondary, dark);
    box-shadow: 0 4px 12px rgba(0,0,0,.5);
  }

  i {
    font-size: $fs-3;
  }

  &:hover {
    transform: translateY(-1px);
    @include theme-block      { color: tone(contrast, light); }
    @include theme-block-dark { color: tone(contrast, dark);  }
  }

  &.is-ping {
    animation: horn-ping 0.26s ease-out;
  }
}

@keyframes horn-ping {
  0%   { transform: scale(1); }
  40%  { transform: scale(1.12) translateY(-1px); }
  100% { transform: scale(1); }
}

.home-hero__sub {
  margin: 0;
  font-size: clamp($fs-4, 2.4vw, $fs-6);
  opacity: .94;
}

.home-hero__bio {
  margin: 0;
  max-width: 60ch;
  font-size: $fs-3;

  @include theme-block      { color: tone(foreground, light); }
  @include theme-block-dark { color: tone(foreground, dark);  }
}

.home-hero__cta {
  display: flex;
  flex-wrap: wrap;
  gap: $sp-6;
  align-items: center;

  .button {
    @include theme-block      { color: tone(white, light); }
    @include theme-block-dark { color: tone(black, dark);  }

    &:hover {
      @include theme-block      { color: tone(white, light); }
      @include theme-block-dark { color: tone(black, dark);  }
    }
  }
}

.home-hero__meta {
  display: grid;
  gap: $sp-3;
  margin-top: $sp-2;
}

.home-hero__meta-row {
  display: flex;
  align-items: center;
  gap: $sp-5;
  font-size: $fs-2;

  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* Pill stats */
.home-hero__stats {
  display: flex;
  flex-wrap: wrap;
  gap: $sp-6;
  margin-top: $sp-7;
  padding: 0;
  list-style: none;
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: $sp-5;
  padding: .38rem .7rem;
  border-radius: $radius-pill;
  border: 1px solid;

  @include theme-block {
    background: tone(surface, light);
    border-color: tone(border, light);
    box-shadow: $shadow-light;
  }
  @include theme-block-dark {
    background: tone(surface, dark);
    border-color: tone(border, dark);
    box-shadow: $shadow-dark;
  }

  .pill__val {
    font-weight: $fw-semibold;
    font-size: $fs-3;
    line-height: $lh-tight;
  }

  .pill__label {
    font-size: $fs-1;
    opacity: .9;
  }
}

/* Art wrapper */
.home-hero__art-wrap {
  position: relative;
}

.home-hero__art {
  margin: 0;
  width: min(96%, 520px);
  justify-self: center;
  position: relative;
}

/* Frame container: 3D tilt towards content */
.home-hero__video-shell {
  position: relative;
  width: 100%;
  border-radius: $radius-6;
  overflow: hidden;
  isolation: isolate;
  transition:
    transform 350ms $ease-in-out,
    box-shadow 300ms $ease-in-out;

  @include theme-block {
    background: tone(background-100, light);
    border: 1px solid tone(border, light);
    box-shadow: $shadow-light;
  }
  @include theme-block-dark {
    background: tone(background-200, dark);
    border: 1px solid tone(border, dark);
    box-shadow: $shadow-dark;
  }
}

/* Default no tilt on small screens for stability */
@media (min-width: $bp-lg) {
  .home-hero__video-shell {
    transform: perspective(1200px) rotateY(-5deg) rotateX(1deg);
    transform-origin: center left;
  }
  .home-hero__video-shell:hover {
    transform: perspective(1200px) rotateY(-2deg) rotateX(0deg) translateY(-2px);
  }
}

/* Ratio spacer: square â†’ 16/9 when playing */
.home-hero__ratio {
  width: 100%;
  padding-top: 100%; /* 1:1 */
  transition: padding-top 350ms $ease-in-out;
}

.home-hero__video-shell[data-hero-state="playing"] .home-hero__ratio {
  padding-top: 56.25%; /* 16/9 */
}

/* Poster image with vintage overlay */
.home-hero__video-poster {
  position: absolute;
  inset: 0;
  overflow: hidden;
  z-index: 1;
  transition: opacity 260ms ease;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    filter: contrast(1.05) saturate(.9) brightness(.96);
  }
}

/* Hide poster while playing */
.home-hero__video-shell[data-hero-state="playing"] .home-hero__video-poster {
  opacity: 0;
}

/* Old TV scanlines + grain */
.home-hero__video-poster::before,
.home-hero__video-poster::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.home-hero__video-poster::before {
  background-image:
    linear-gradient(to bottom, rgba(0,0,0,.24) 0, rgba(0,0,0,0) 2px);
  background-size: 100% 3px;
  opacity: .55;
  mix-blend-mode: soft-light;
}

.home-hero__video-poster::after {
  background-image:
    radial-gradient(circle at 0 0, rgba(255,255,255,.09) 0, transparent 40%),
    radial-gradient(circle at 100% 0, rgba(0,0,0,.12) 0, transparent 45%),
    radial-gradient(circle at 0 100%, rgba(0,0,0,.12) 0, transparent 45%),
    radial-gradient(circle at 100% 100%, rgba(255,255,255,.06) 0, transparent 45%);
  mix-blend-mode: soft-light;
  opacity: .5;
  animation: hero-grain 2.4s steps(3) infinite;
}

@keyframes hero-grain {
  0%   { transform: translate3d(0,0,0); }
  25%  { transform: translate3d(-4px, 3px, 0); }
  50%  { transform: translate3d(3px,-2px, 0); }
  75%  { transform: translate3d(-2px,-3px, 0); }
  100% { transform: translate3d(0,0,0); }
}

/* YouTube iframe container (filled by JS) */
.home-hero__video-embed {
  position: absolute;
  inset: 0;
  z-index: 2;

  iframe {
    width: 100%;
    height: 100%;
    border: 0;
    display: block;
  }
}

/* External play / pause pill button */
.home-hero__video-toggle {
  position: absolute;
  left: $sp-6;
  bottom: $sp-6;
  z-index: 3;
  display: inline-flex;
  align-items: center;
  gap: .45rem;
  padding: .42rem .9rem;
  border-radius: $radius-pill;
  border: 1px solid;
  font-size: $fs-2;
  cursor: pointer;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  text-decoration: none;
  white-space: nowrap;

  @include theme-block {
    background: rgba(0,0,0,.78);
    color: tone(white, light);
    border-color: rgba(255,255,255,.16);
  }
  @include theme-block-dark {
    background: rgba(0,0,0,.82);
    color: tone(white, dark);
    border-color: rgba(255,255,255,.18);
  }

  i { font-size: $fs-3; line-height: 1; }
}

/* Social rail half in/out */
.home-hero__social {
  position: absolute;
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  gap: $sp-5;

  /* mobile: bottom center, half outside */
  left: 50%;
  bottom: -0.9rem;
  transform: translateX(-50%);
  li { margin: 0; }

  a {
    inline-size: 2.2rem;
    block-size: 2.2rem;
    display: grid;
    place-items: center;
    border-radius: $radius-4;
    text-decoration: none;
    border: 1px solid;

    @include theme-block {
      background: tone(surface, light);
      border-color: tone(border, light);
      color: tone(contrast, light);
      box-shadow: $shadow-light;
    }
    @include theme-block-dark {
      background: tone(surface, dark);
      border-color: tone(border, dark);
      color: tone(contrast, dark);
      box-shadow: $shadow-dark;
    }

    transition: transform $dur-1 $ease-in-out, box-shadow $dur-1 $ease-in-out;

    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,.12);
    }
  }
}

/* Desktop: right-side vertical rail half outside */
@media (min-width: $bp-lg) {
  .home-hero__social {
    top: 50%;
    bottom: auto;
    left: auto;
    right: -1.1rem;
    transform: translateY(-50%);
    flex-direction: column;
  }
}
