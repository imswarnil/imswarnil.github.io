/* =========================================
   HOME HERO (scoped)
========================================= */

.home-hero {
  position: relative;
  padding-block: clamp($sp-10, 4.5vw, $sp-14);
  overflow-x: clip;
}

/* Animated grid background */
.home-hero__bg-grid {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;

  background-image:
    linear-gradient(to right,
      rgba(0,0,0,0.06) 1px,
      transparent 1px),
    linear-gradient(to bottom,
      rgba(0,0,0,0.06) 1px,
      transparent 1px);
  background-size: 22px 22px;
  opacity: 0.35;
  mask-image: radial-gradient(circle at center, black 0%, transparent 78%);
  -webkit-mask-image: radial-gradient(circle at center, black 0%, transparent 78%);

  @include theme-block-dark {
    background-image:
      linear-gradient(to right,
        rgba(255,255,255,0.12) 1px,
        transparent 1px),
      linear-gradient(to bottom,
        rgba(255,255,255,0.12) 1px,
        transparent 1px);
    opacity: 0.4;
  }

  animation: home-hero-grid-pan 18s linear infinite;
}

@keyframes home-hero-grid-pan {
  0%   { background-position: 0 0, 0 0; }
  100% { background-position: 22px 22px, 22px 22px; }
}

/* Layout */
.home-hero__grid {
  position: relative;
  z-index: 1;
  display: grid;
  gap: clamp($sp-8, 3vw, $sp-12);
  grid-template-columns: 1fr;
  align-items: center;

  @include mq-up($bp-lg) {
    grid-template-columns: 1.05fr 0.95fr;
  }
}

/* Art first on mobile */
@media (max-width: $bp-lg) {
  .home-hero__art-wrap {
    order: -1;
  }
}

/* Copy side */
.home-hero__copy {
  display: grid;
  gap: $sp-6;
  min-width: 0;
}

/* Hi + hand */
.home-hero__hello {
  margin: 0;
  display: flex;
  align-items: center;
  gap: $sp-5;
  font-size: $fs-4;
  font-weight: $fw-medium;

  i {
    color: #facc15; // yellow
    font-size: 1.5em;
    transform-origin: 60% 60%;
    animation: home-hero-wave 1.2s ease-in-out infinite;
  }
}

@keyframes home-hero-wave {
  0%,100% { transform: rotate(0deg); }
  20%     { transform: rotate(16deg); }
  40%     { transform: rotate(-10deg); }
  60%     { transform: rotate(12deg); }
  80%     { transform: rotate(-6deg); }
}

.home-hero__name {
  margin: 0;
  font-weight: $fw-bold;
  line-height: $lh-tight;
  font-size: clamp($fs-7, 6vw, $fs-10);
}

.home-hero__sub {
  margin: 0;
  font-size: clamp($fs-4, 2.4vw, $fs-6);
  opacity: 0.92;
}

.home-hero__bio {
  margin: 0;
  max-width: 60ch;
  font-size: $fs-3;

  @include theme-block { color: tone(foreground, light); }
  @include theme-block-dark { color: tone(foreground, dark); }
}

/* CTA row */
.home-hero__cta {
  display: flex;
  flex-wrap: wrap;
  gap: $sp-6;
  align-items: center;

  .button {
    @include theme-block { color: tone(white, light); }
    @include theme-block-dark { color: tone(black, dark); }

    &:hover {
      @include theme-block { color: tone(white, light); }
      @include theme-block-dark { color: tone(black, dark); }
    }
  }
}

/* Meta */
.home-hero__meta {
  display: grid;
  gap: $sp-3;
  margin-top: $sp-2;
}

.home-hero__meta-row {
  display: flex;
  align-items: center;
  gap: $sp-5;
  font-size: $fs-2;

  @include theme-block { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark); }
}

/* Stats (hero-only) */
.home-hero__stats {
  display: flex;
  flex-wrap: wrap;
  gap: $sp-6;
  margin-top: $sp-7;
  padding: 0;
  list-style: none;
}

.home-hero__pill {
  display: inline-flex;
  align-items: center;
  gap: $sp-5;
  padding: .38rem .7rem;
  border-radius: $radius-pill;
  border: 1px solid;

  @include theme-block {
    background: tone(surface, light);
    border-color: tone(border, light);
    box-shadow: $shadow-light;
  }
  @include theme-block-dark {
    background: tone(surface, dark);
    border-color: tone(border, dark);
    box-shadow: $shadow-dark;
  }
}

.home-hero__pill-val {
  font-weight: $fw-semibold;
  font-size: $fs-3;
  line-height: $lh-tight;
}

.home-hero__pill-label {
  font-size: $fs-1;
  opacity: .9;
}

/* ================================
   ART CARD (outer container)
================================ */

.home-hero__art-wrap {
  position: relative;
}

.home-hero__art {
  margin: 0;
  width: min(96%, 520px);
  border-radius: $radius-6;
  overflow: visible; // social rail hangs out
  justify-self: center;
  position: relative;
  padding: $sp-6; // inner padding for media

  @include theme-block {
    background: tone(background-100, light);
    border: 1px solid tone(border, light);  // single border
    box-shadow: $shadow-light;
  }
  @include theme-block-dark {
    background: tone(background-200, dark);
    border: 1px solid tone(border, dark);   // single border
    box-shadow: $shadow-dark;
  }
}

@media (max-width: $bp-lg) {
  .home-hero__art {
    width: min(100%, 420px);
  }
}

/* Inner media frame:
   - Square by default (padding-top:100%)
   - 16:9 when playing (padding-top:56.25%)
   => outer height adjusts accordingly
*/
.home-hero__media {
  position: relative;
  width: 100%;
  padding-top: 100%; // square by default
  border-radius: $radius-5;
  overflow: hidden;

  @include theme-block   { background: tone(background-100, light); }
  @include theme-block-dark { background: tone(background-200, dark); }

  transition:
    padding-top 220ms $ease-in-out,
    transform 220ms $ease-in-out,
    border-radius 220ms $ease-in-out;
}

/* When playing, morph to 16:9 and subtle lift */
.home-hero.home-hero--playing .home-hero__media {
  padding-top: 56.25%; // 16:9
  transform: scale(1.01);
  border-radius: $radius-4;
}

/* Image + video layers */
.home-hero__thumb,
.home-hero__video {
  position: absolute;
  inset: 0;
  transition: opacity 0.22s $ease-in-out;
}

.home-hero__thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
}

.home-hero__thumb {
  opacity: 1;
}

/* VIDEO: fills the media frame, keeps 16:9 via absolutely positioned iframe */
.home-hero__video {
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
}

.home-hero__video-frame {
  position: absolute;
  inset: 0;
}

.home-hero__video-frame iframe {
  width: 100%;
  height: 100%;
  display: block;
  border-radius: $radius-4;
}

/* Playing state: swap layers */
.home-hero.home-hero--playing {
  .home-hero__thumb {
    opacity: 0;
    pointer-events: none;
  }

  .home-hero__video {
    opacity: 1;
    pointer-events: auto;
  }
}

/* Play button â€“ icon only, with tooltip */
.home-hero__play {
  position: absolute;
  left: $sp-5;
  bottom: $sp-5;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  inline-size: 2.5rem;
  block-size: 2.5rem;
  border-radius: 999px;
  border: 1px solid transparent;
  font-size: $fs-4;
  cursor: pointer;
  padding: 0;
  text-decoration: none;

  @include theme-block {
    background: tone(contrast, light);
    color: tone(white, light);
    box-shadow: $shadow-light;
  }
  @include theme-block-dark {
    background: tone(white, dark);
    color: tone(black, dark);
    box-shadow: $shadow-dark;
  }

  transition:
    transform $dur-1 $ease-in-out,
    box-shadow $dur-1 $ease-in-out,
    background-color $dur-1 $ease-in-out;

  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 18px rgba(0,0,0,.18);
  }

  /* Tooltip */
  &::after {
    content: "Watch my story";
    position: absolute;
    left: 0;  // anchor so it doesn't go out of frame
    bottom: calc(100% + 0.55rem);
    white-space: nowrap;
    font-size: $fs-1;
    padding: 0.25rem 0.55rem;
    border-radius: $radius-3;
    opacity: 0;
    pointer-events: none;
    transform: translateY(0);
    transition: opacity $dur-1 $ease-in-out, transform $dur-1 $ease-in-out;

    @include theme-block {
      background: tone(background-200, light);
      color: tone(contrast, light);
      box-shadow: $shadow-light;
    }
    @include theme-block-dark {
      background: tone(background-200, dark);
      color: tone(contrast, dark);
      box-shadow: $shadow-dark;
    }
  }

  &:hover::after,
  &:focus-visible::after {
    opacity: 1;
    transform: translateY(-2px);
  }
}

@media (max-width: $bp-lg) {
  .home-hero__play {
    left: auto;
    right: $sp-4;
    bottom: auto;
    top: $sp-4;
  }
}

/* Social rail: half on border, half outside */
.home-hero__social {
  position: absolute;
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  gap: $sp-5;

  /* mobile: bottom center, half outside */
  left: 50%;
  bottom: -1.1rem;
  transform: translateX(-50%);

  li { margin: 0; }

  a {
    inline-size: 2.2rem;
    block-size: 2.2rem;
    display: grid;
    place-items: center;
    border-radius: $radius-4;
    text-decoration: none;
    border: 1px solid;
    cursor: pointer;

    @include theme-block {
      background: tone(surface, light);
      border-color: tone(border, light);
      color: tone(contrast, light);
      box-shadow: $shadow-light;
    }
    @include theme-block-dark {
      background: tone(surface, dark);
      border-color: tone(border, dark);
      color: tone(contrast, dark);
      box-shadow: $shadow-dark;
    }

    transition: transform $dur-1 $ease-in-out, box-shadow $dur-1 $ease-in-out;

    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,.12);
    }
  }
}

@media (min-width: $bp-lg) {
  .home-hero__social {
    top: 50%;
    bottom: auto;
    left: auto;
    right: -1.1rem; // ~half outside
    transform: translateY(-50%);
    flex-direction: column;
  }
}
