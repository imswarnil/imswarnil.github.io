/* =========================================
   HOME HUB – Mosaic quick actions
   Uses ImSwarnil base tokens & grid feel
========================================= */

.home-hub {
  margin-block: clamp($sp-10, 5vw, $sp-14);
  overflow-x: clip;
}

.home-hub__head {
  margin-bottom: $sp-8;
  display: grid;
  gap: $sp-2;
}

.home-hub__title {
  margin: 0;
  font-size: $fs-7;
  line-height: $lh-tight;
}

.home-hub__subtitle {
  margin: 0;
  max-width: 48ch;
  font-size: $fs-3;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* Mosaic grid */
.home-hub__grid {
  display: grid;
  gap: $sp-6;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
}

/* Base tile */
.home-hub__tile {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: $sp-4;

  padding: $sp-7;
  border-radius: $radius-5;
  border: 1px solid;
  text-decoration: none;

  /* simpler height – no aspect-ratio to avoid overlap */
  min-height: clamp(220px, 28vw, 260px);

  overflow: hidden;
  cursor: pointer;
  box-sizing: border-box;

  @include theme-block {
    background: tone(surface, light);
    border-color: tone(border, light);
    box-shadow: $shadow-light;
    color: tone(contrast, light);
  }
  @include theme-block-dark {
    background: tone(surface, dark);
    border-color: tone(border, dark);
    box-shadow: $shadow-dark;
    color: tone(contrast, dark);
  }

  /* Subtle grid overlay */
  &::before {
    content: "";
    position: absolute;
    inset: -40%;
    background-image:
      linear-gradient(
        to right,
        rgba(255,255,255,.05) 1px,
        transparent 1px
      ),
      linear-gradient(
        to bottom,
        rgba(255,255,255,.05) 1px,
        transparent 1px
      );
    background-size: 26px 26px;
    opacity: .4;
    pointer-events: none;
    mix-blend-mode: soft-light;
  }

  /* Hover lift + slight tilt */
  transition:
    transform $dur-1 $ease-in-out,
    box-shadow $dur-1 $ease-in-out,
    border-color $dur-1 $ease-in-out,
    background-color $dur-1 $ease-in-out;

  &:hover {
    transform: translateY(-3px) rotate3d(0.15, -0.2, 0, 4deg);
    @include theme-block      { box-shadow: 0 14px 30px rgba(0,0,0,.14); }
    @include theme-block-dark { box-shadow: 0 14px 30px rgba(0,0,0,.42); }
  }

  /* Inner content sits above overlay */
  > * {
    position: relative;
    z-index: 1;
  }
}

/* Remove pointer on non-link tiles (like meta) */
.home-hub__tile--meta {
  cursor: default;
}

/* Topline, pill, label, text */

.home-hub__topline {
  display: flex;
  align-items: center;
  gap: $sp-4;
  margin-bottom: $sp-2;
}

.home-hub__kicker {
  font-size: $fs-2;
  text-transform: uppercase;
  letter-spacing: .08em;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

.home-hub__pill {
  font-size: $fs-1;
  padding-inline: .6rem;
  padding-block: .18rem;
  border-radius: $radius-pill;
  border: 1px solid;
  @include theme-block {
    background: tone(background-100, light);
    border-color: tone(border, light);
    color: tone(secondary, light);
  }
  @include theme-block-dark {
    background: tone(background-100, dark);
    border-color: tone(border, dark);
    color: tone(secondary, dark);
  }
}

.home-hub__label {
  margin: 0 0 $sp-3 0;
  font-size: $fs-5;
  font-weight: $fw-semibold;
  line-height: $lh-tight;
}

.home-hub__text {
  margin: 0 0 $sp-4 0;
  font-size: $fs-2;
  line-height: $lh-tight;
  @include theme-block      { color: tone(foreground, light); }
  @include theme-block-dark { color: tone(foreground, dark);  }
}

/* Footer row */

.home-hub__footer {
  margin-top: auto;
  padding-top: $sp-4;
  display: flex;
  flex-wrap: wrap;
  gap: $sp-4;
  align-items: center;
  justify-content: space-between;
  border-top: 1px solid;
  @include theme-block      { border-color: tone(border, light); }
  @include theme-block-dark { border-color: tone(border, dark);  }
}

/* Split footer for /now + /search tile */
.home-hub__footer--split {
  justify-content: space-between;
  gap: $sp-3;
}

.home-hub__stat {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  font-size: $fs-2;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }

  i { font-size: $fs-4; }
}

.home-hub__cta {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  font-size: $fs-2;
  font-weight: $fw-medium;
  text-decoration: none;

  @include theme-block      { color: tone(contrast, light); }
  @include theme-block-dark { color: tone(contrast, dark);  }

  i { font-size: $fs-4; }

  transition: transform $dur-1 $ease-in-out;
  .home-hub__tile:hover & {
    transform: translateX(2px);
  }
}

/* --- Video tile --- */

.home-hub__video-shell {
  margin-bottom: $sp-3;
}

.home-hub__video-frame {
  border-radius: $radius-4;
  border: 1px solid;
  overflow: hidden;
  display: grid;
  grid-template-rows: auto 1fr auto;
  @include theme-block {
    border-color: tone(border, light);
    background: linear-gradient(135deg, #f4f4f6, #dedfe4);
  }
  @include theme-block-dark {
    border-color: tone(border, dark);
    background: radial-gradient(circle at top left, #3b3b4a, #15151c);
  }
}

.home-hub__video-track {
  display: flex;
  align-items: center;
  gap: .35rem;
  padding: .35rem .5rem;
  @include theme-block      { background: rgba(255,255,255,.7); }
  @include theme-block-dark { background: rgba(0,0,0,.3);        }
}

.home-hub__video-dot {
  width: .5rem;
  height: .5rem;
  border-radius: 999px;
  @include theme-block      { background: tone(border, light); }
  @include theme-block-dark { background: tone(border, dark);  }
}

.home-hub__video-thumb {
  position: relative;
  aspect-ratio: 16 / 9;
  @include theme-block {
    background: linear-gradient(
      135deg,
      rgba(0,0,0,.08),
      rgba(0,0,0,.18)
    );
  }
  @include theme-block-dark {
    background: linear-gradient(
      135deg,
      rgba(255,255,255,.04),
      rgba(255,255,255,.12)
    );
  }
  display: grid;
  place-items: center;
}

.home-hub__video-tag {
  font-size: $fs-1;
  padding: .2rem .55rem;
  border-radius: $radius-pill;
  border: 1px solid;
  @include theme-block {
    background: rgba(255,255,255,.9);
    border-color: tone(border, light);
    color: tone(secondary, light);
  }
  @include theme-block-dark {
    background: rgba(0,0,0,.6);
    border-color: tone(border, dark);
    color: tone(secondary, dark);
  }
}

.home-hub__video-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: .35rem .7rem;
  font-size: $fs-1;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

.home-hub__video-duration {
  font-variant-numeric: tabular-nums;
}

/* --- Projects / GitHub-style --- */

.home-hub__repo-list {
  display: grid;
  gap: .4rem;
  margin-bottom: $sp-3;
}

.home-hub__repo-row {
  padding: .35rem .5rem;
  border-radius: $radius-3;
  @include theme-block {
    background: rgba(255,255,255,.85);
    color: tone(contrast, light);
  }
  @include theme-block-dark {
    background: rgba(0,0,0,.5);
    color: tone(contrast, dark);
  }
  font-size: $fs-2;
}

.home-hub__repo-name {
  display: block;
  font-weight: $fw-medium;
  margin-bottom: .15rem;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

.home-hub__repo-meta {
  display: flex;
  align-items: center;
  gap: $sp-3;
  font-size: $fs-1;
  opacity: .9;
}

.home-hub__dot {
  width: .45rem;
  height: .45rem;
  border-radius: 999px;
  background: currentColor;
}

.home-hub__spacer {
  width: 1px;
  height: .9rem;
  background: currentColor;
  opacity: .3;
}

/* --- Courses/snippets – product card code --- */

.home-hub__code-shell {
  margin-bottom: $sp-3;
  border-radius: $radius-4;
  border: 1px solid;
  overflow: hidden;
  @include theme-block      { border-color: tone(border, light); background: #080c16; }
  @include theme-block-dark { border-color: tone(border, dark);  background: #040610; }
}

.home-hub__code-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: $sp-3;
  padding: .35rem .6rem;
  font-size: $fs-1;
  @include theme-block      { background: rgba(255,255,255,.06); }
  @include theme-block-dark { background: rgba(255,255,255,.05); }
}

.home-hub__code-lang {
  font-family: inherit;
  text-transform: uppercase;
  letter-spacing: .12em;
  opacity: .8;
}

.home-hub__code-pill {
  font-size: $fs-1;
  padding-inline: .5rem;
  padding-block: .12rem;
  border-radius: $radius-pill;
  border: 1px solid;
  @include theme-block {
    border-color: tone(border, light);
    color: tone(secondary, light);
  }
  @include theme-block-dark {
    border-color: tone(border, dark);
    color: tone(secondary, dark);
  }
}

.home-hub__code-body {
  margin: 0;
  padding: .6rem .75rem .8rem;
  font-family: inherit;
  font-size: $fs-1;
  line-height: 1.45;
  color: #f5f7ff;
  white-space: pre;
}

/* --- Reviews tile --- */

.home-hub__review-shell {
  margin-bottom: $sp-3;
  display: grid;
  gap: $sp-3;
}

.home-hub__review-stars {
  display: flex;
  align-items: center;
  gap: .25rem;
  font-size: $fs-4;
  @include theme-block      { color: #f5b300; }
  @include theme-block-dark { color: #ffd666; }

  .home-hub__review-score {
    margin-left: .4rem;
    font-size: $fs-2;
    font-weight: $fw-medium;
    @include theme-block      { color: tone(secondary, light); }
    @include theme-block-dark { color: tone(secondary, dark);  }
  }
}

.home-hub__review-comment {
  padding: .5rem .6rem;
  border-radius: $radius-4;
  border: 1px dashed;
  @include theme-block {
    border-color: tone(border, light);
    background: rgba(255,255,255,.9);
  }
  @include theme-block-dark {
    border-color: tone(border, dark);
    background: rgba(0,0,0,.5);
  }
}

.home-hub__review-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: $sp-3;
  margin-bottom: .25rem;
  font-size: $fs-1;
  text-transform: uppercase;
  letter-spacing: .08em;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

.home-hub__review-tag {
  font-size: $fs-1;
}

.home-hub__review-text {
  margin: 0;
  font-size: $fs-2;
  line-height: $lh-tight;
}

/* Small responsive tweak */

@media (max-width: $bp-lg) {
  .home-hub__tile {
    min-height: 230px;
  }
}



/* =========================================
   HOME TIMELINE – Horizontal journey rail
   All classes prefixed .home-timeline-*
========================================= */

.home-timeline {
  margin-block: clamp($sp-10, 5vw, $sp-14);
  overflow-x: clip;
}

.home-timeline__head {
  margin-bottom: $sp-7;
  display: grid;
  gap: $sp-2;
}

.home-timeline__title {
  margin: 0;
  font-size: $fs-7;
  line-height: $lh-tight;
}

.home-timeline__subtitle {
  margin: 0;
  max-width: 52ch;
  font-size: $fs-3;

  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* Scroll wrapper – allow horizontal drag, hide scrollbar */
.home-timeline__scroller {
  overflow-x: auto;
  overflow-y: visible;
  padding-bottom: $sp-4;
  margin-inline: -$sp-4;
  padding-inline: $sp-4;
  -ms-overflow-style: none;       /* IE / Edge */
  scrollbar-width: none;          /* Firefox */
}

.home-timeline__scroller::-webkit-scrollbar {
  display: none;                  /* Chrome / Safari */
}

.home-timeline__track {
  position: relative;
  min-width: 820px;
  padding-top: $sp-7;
  padding-bottom: $sp-5;
}

/* Dashed line rail */
.home-timeline__line {
  position: absolute;
  top: $sp-5;
  left: $sp-6;
  right: $sp-6;
  height: 0;
  border-top-width: 2px;
  border-top-style: dashed;
  border-radius: 999px;

  @include theme-block      { border-top-color: tone(border, light); }
  @include theme-block-dark { border-top-color: tone(border, dark);  }
}

/* Avatar that moves between nodes */
.home-timeline__avatar {
  position: absolute;
  top: calc(#{$sp-5} - 1.5rem);
  left: 0;
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid;
  z-index: 2;
  transform: translateX(0);
  transition: transform 0.7s $ease-in-out;

  @include theme-block {
    border-color: tone(white, light);
    box-shadow: 0 10px 22px rgba(0,0,0,0.20);
  }
  @include theme-block-dark {
    border-color: tone(white, dark);
    box-shadow: 0 10px 26px rgba(0,0,0,0.85);
  }

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
}

/* Steps row */
.home-timeline__steps {
  margin: 0;
  padding: $sp-7 $sp-6 0 $sp-6;
  list-style: none;
  display: flex;
  gap: $sp-7;
  align-items: flex-start;
}

/* Each step: compact by default, card expands only for active */
.home-timeline__step {
  position: relative;
  flex: 0 0 220px;
  display: grid;
  gap: $sp-3;
  align-items: flex-start;
  cursor: pointer;
}

/* Step hit area (node + short text) */
.home-timeline__step-btn {
  border: 0;
  padding: 0;
  margin: 0;
  background: none;
  text-align: left;
  cursor: pointer;
}

/* Node: dot + year + short label, aligned to rail */
.home-timeline__node {
  display: flex;
  align-items: center;
  gap: $sp-4;
}

.home-timeline__dot {
  inline-size: 2rem;
  block-size: 2rem;
  border-radius: 999px;
  border: 2px solid;
  display: grid;
  place-items: center;
  margin-top: -$sp-2; /* sit slightly on the line */

  @include theme-block {
    background: #ffffff;
    border-color: tone(border, light);
    box-shadow: 0 0 0 2px rgba(255,255,255,0.75),
                0 8px 18px rgba(0,0,0,0.16);
    color: tone(contrast, light);
  }
  @include theme-block-dark {
    background: #07090f;
    border-color: tone(border, dark);
    box-shadow: 0 0 0 2px rgba(0,0,0,0.85),
                0 10px 24px rgba(0,0,0,0.85);
    color: tone(contrast, dark);
  }

  i {
    font-size: $fs-4;
  }
}

.home-timeline__dot--now {
  @include theme-block {
    background: linear-gradient(135deg, #ffffff, #e5f3ff);
    border-color: #7ecbff;
  }
  @include theme-block-dark {
    background: linear-gradient(135deg, #181f32, #314673);
    border-color: #67b2ff;
  }
}

.home-timeline__meta {
  display: grid;
  gap: .12rem;
}

.home-timeline__year {
  font-size: $fs-1;
  letter-spacing: .14em;
  text-transform: uppercase;

  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

.home-timeline__short {
  font-size: $fs-2;
  font-weight: $fw-medium;
}

/* Card: collapsed by default, expands when step is active */
.home-timeline__card {
  border-radius: $radius-5;
  border: 1px solid;
  padding: $sp-4;
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transform: translateY(4px);
  transition:
    max-height 0.45s $ease-in-out,
    opacity 0.35s ease,
    transform 0.45s $ease-in-out;

  @include theme-block {
    background: tone(surface, light);
    border-color: tone(border, light);
    box-shadow: none;
  }
  @include theme-block-dark {
    background: tone(surface, dark);
    border-color: tone(border, dark);
    box-shadow: none;
  }
}

/* Highlight current phase */
.home-timeline__card--now {
  @include theme-block {
    background: linear-gradient(135deg, #ffffff, #e5ecff);
    box-shadow: $shadow-light;
  }
  @include theme-block-dark {
    background: linear-gradient(135deg, #181a24, #263353);
    box-shadow: $shadow-dark;
  }
}

.home-timeline__label {
  margin: 0 0 .25rem 0;
  font-size: $fs-4;
  font-weight: $fw-semibold;
  line-height: $lh-tight;
}

.home-timeline__text {
  margin: 0;
  font-size: $fs-2;
  line-height: $lh-tight;

  @include theme-block      { color: tone(foreground, light); }
  @include theme-block-dark { color: tone(foreground, dark);  }
}

/* Active step: expanded card */
.home-timeline__step--active .home-timeline__card {
  max-height: 220px;
  opacity: 1;
  transform: translateY(0);
}

/* Footer controls */
.home-timeline__footer {
  margin-top: $sp-6;
  display: flex;
  flex-wrap: wrap;
  gap: $sp-4;
  justify-content: space-between;
  align-items: center;
}

.home-timeline__controls {
  display: flex;
  flex-wrap: wrap;
  gap: $sp-3;
}

.home-timeline__ctrl {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  font-size: $fs-2;
  padding-inline: $sp-5;

  i { font-size: $fs-4; }

  &:disabled {
    opacity: .45;
    cursor: default;
  }
}

.home-timeline__full {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  font-size: $fs-2;

  i { font-size: $fs-4; }
}

/* Responsive tweaks */
@media (max-width: $bp-md) {
  .home-timeline__title {
    font-size: $fs-6;
  }

  .home-timeline__track {
    min-width: 720px;
  }

  .home-timeline__steps {
    gap: $sp-5;
  }

  .home-timeline__step {
    flex-basis: 200px;
  }
}

@media (max-width: $bp-sm) {
  .home-timeline__track {
    min-width: 640px;
  }

  .home-timeline__steps {
    gap: $sp-4;
  }

  .home-timeline__step {
    flex-basis: 180px;
  }

  .home-timeline__avatar {
    width: 2.6rem;
    height: 2.6rem;
    top: calc(#{$sp-5} - 1.3rem);
  }
}
