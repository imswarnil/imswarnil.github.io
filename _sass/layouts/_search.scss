// ======================================================================
// search.scss â€” Namespaced search page component
// Prefix: .search-page
// ======================================================================

.search-page {
  padding: $sp-8 0 $sp-10;
}

.search-page__head {
  margin-bottom: $sp-6;
}
.search-page__title {
  display: inline-flex; align-items: center; gap: $sp-3;
  margin: 0 0 $sp-2;
  font-size: clamp(#{$fs-6}, 2.2vw, #{$fs-9});
  line-height: 1.06; letter-spacing: -.01em;
  @include theme-block      { color: tone(contrast, light); }
  @include theme-block-dark { color: tone(contrast, dark); }
  i { font-size: 1em; }
}
.search-page__sub {
  margin: 0;
  font-size: clamp(#{$fs-3}, 1.2vw, #{$fs-5});
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* --- Bar --- */
.search-page__bar {
  margin-bottom: $sp-4;
}
.search-page__form {
  position: relative;
  display: flex; align-items: center;
  gap: $sp-3;
  border-radius: $radius-6;
  padding: $sp-3 $sp-5;
  border: 1px solid;

  @include theme-block      { background: tone(surface, light);       border-color: tone(border, light); }
  @include theme-block-dark { background: tone(background-100, dark); border-color: tone(border, dark);  }

  transition: box-shadow $dur-1 $ease-in-out, border-color $dur-1 $ease-in-out, background-color $dur-1;
  &:focus-within {
    box-shadow: 0 16px 40px -20px rgba(0,0,0,.25);
    @include theme-block-dark { box-shadow: 0 22px 50px -22px rgba(0,0,0,.6); }
  }
}
.search-page__form-icon {
  font-size: $fs-5;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}
.search-page__input {
  flex: 1; min-width: 0;
  border: 0; outline: 0; background: transparent;
  font-size: $fs-4;
  @include theme-block      { color: tone(contrast, light); }
  @include theme-block-dark { color: tone(contrast, dark);  }
}
.search-page__clear {
  display: inline-grid; place-items: center;
  width: $btn-height-sm; height: $btn-height-sm;
  border-radius: 50%;
  border: 1px solid transparent;
  background: transparent; cursor: pointer;

  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }

  transition: background-color $dur-1, transform $dur-1, color $dur-1, border-color $dur-1;
  &:hover {
    transform: translateY(-1px);
    @include theme-block      { background: tone(background-200, light); border-color: tone(border, light); color: tone(contrast, light); }
    @include theme-block-dark { background: tone(background-200, dark);  border-color: tone(border, dark);  color: tone(contrast, dark);  }
  }
}

.search-page__help {
  margin-top: $sp-2;
  font-size: $fs-2;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* --- Status --- */
.search-page__status {
  min-height: 1.2em;
  margin: $sp-2 0 $sp-2;
  font-size: $fs-2;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* --- Results list --- */
.search-page__results {
  display: none; /* hidden until we have something */
  list-style: none; margin: 0; padding: 0;
  border: 1px solid; border-radius: $radius-6;
  overflow: clip;

  @include theme-block      { background: tone(background, light);   border-color: tone(border, light); box-shadow: $shadow-light; }
  @include theme-block-dark { background: tone(background-100, dark); border-color: tone(border, dark);  box-shadow: $shadow-dark; }

  &.is-visible { display: block; }
}

/* Result row */
.search-page__result + .search-page__result { border-top: 1px solid; @include theme-block { border-color: tone(border, light); } @include theme-block-dark { border-color: tone(border, dark); } }

.search-page__result-link {
  position: relative;
  display: grid;
  grid-template-columns: 3.25rem 1fr auto;
  gap: $sp-4;
  padding: $sp-4 $sp-5;
  text-decoration: none;
  cursor: pointer;

  @include theme-block      { color: tone(contrast, light); }
  @include theme-block-dark { color: tone(contrast, dark);  }

  transition: background-color $dur-1, transform $dur-1;
  &:hover, &:focus {
    outline: none;
    transform: translateY(-1px);
    @include theme-block      { background: tone(background-100, light); }
    @include theme-block-dark { background: tone(background-100, dark);  }
  }

  @media (max-width: $bp-sm) {
    grid-template-columns: 2.75rem 1fr auto;
    padding: $sp-4;
  }
}

/* Thumbnail block (icon or image) */
.search-page__thumb {
  width: 3.25rem; height: 3.25rem;
  border-radius: $radius-3; overflow: hidden;
  display: grid; place-items: center;
  border: 1px solid;

  @include theme-block      { border-color: tone(border, light); background: tone(background-100, light); }
  @include theme-block-dark { border-color: tone(border, dark);  background: tone(background-100, dark);  }

  img { width: 100%; height: 100%; display: block; object-fit: cover; }
  .search-page__thumb-icon { font-size: $fs-5; opacity: .9; }
}

/* Meta + text */
.search-page__meta { min-width: 0; }
.search-page__eyebrow {
  display: flex; align-items: center; gap: $sp-2; flex-wrap: wrap;
  margin-bottom: $sp-1;
  font-size: $fs-2;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}
.search-page__type { display: inline-flex; align-items: center; gap: .4rem; }
.search-page__sep { opacity: .5; }
.search-page__url {
  max-width: 36ch; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  @media (max-width: $bp-sm) { max-width: 24ch; }
}

.search-page__titleline {
  margin: 0 0 .1rem;
  font-size: $fs-4;
  line-height: 1.2;
}
.search-page__excerpt {
  margin: 0;
  font-size: $fs-2;
  max-width: 85ch;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
  opacity: .9;

  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* CTA arrow */
.search-page__cta {
  display: grid; place-items: center;
  font-size: $fs-5;
  opacity: .6;
  transition: opacity $dur-1, transform $dur-1;
  .search-page__result-link:hover &,
  .search-page__result-link:focus & {
    opacity: 1; transform: translateX(2px);
  }
}

/* Empty */
.search-page__empty {
  padding: $sp-5; text-align: center; font-size: $fs-3;
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* A11y */
.sr-only {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
}
