@use "vars" as *;

// ===============================
// Base + Typography + Utilities
// ===============================

// Fallback font-face (optional)
// @font-face { font-family: "Geist"; font-weight: 100 900; font-display: swap; src: url(...); }

// Reset-ish
*, *::before, *::after { box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  margin: 0; font-family: $ff-body; font-size: 16px; line-height: 1.6;
  @include theme-block { background-color: tone(background, light); color: tone(foreground, light); }
  @include theme-block-dark { background-color: tone(background, dark); color: tone(foreground, dark); }
}
body.panel-open { overflow: hidden; }

img { max-width: 100%; height: auto; display: block; }
a {
  text-decoration: none; transition: color .2s ease;
  @include theme-block { color: tone(contrast, light); }
  @include theme-block-dark { color: tone(contrast, dark); }
  &:hover {
    @include theme-block { color: tone(accent, light); }
    @include theme-block-dark { color: tone(accent, dark); }
  }
}

// Headings
h1, h2, h3, h4, h5, h6 {
  margin: 0 0 $sp-6 0; line-height: 1.2; font-family: $ff-head; font-weight: $fw-semibold;
  @include theme-block { color: tone(contrast, light); }
  @include theme-block-dark { color: tone(contrast, dark); }
}
h1 { font-size: clamp(2rem, 1.6rem + 1.5vw, 2.8rem); }
h2 { font-size: clamp(1.4rem, 1rem + 1.2vw, 2rem); }
h3 { font-size: 1.25rem; }

// Text elements
p { margin: 0 0 $sp-6 0; }
small, .small { font-size: 0.8125rem; color: tone(secondary, light);
  @include theme-block-dark { color: tone(secondary, dark); }
}
strong { font-weight: 700; }

// Lists
ul, ol { padding-left: 1.25rem; margin: 0 0 $sp-6 0; }
li { margin-bottom: .25rem; }

// Code blocks (simple)
pre, code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Liberation Mono", Consolas, monospace;
}
pre {
  padding: $sp-6; border-radius: $radius-4; overflow-x: auto; border: 1px solid tone(border, light);
  background: tone(background-100, light);
  @include theme-block-dark {
    border-color: tone(border, dark);
    background: tone(background-100, dark);
  }
}

// Layout helpers
.container { @include container; }
.section {
  @include container;
  margin: 0 auto $sp-12; padding: $sp-12;
  border-radius: 24px; border: 1px solid tone(border, light); box-shadow: $shadow-light; background: tone(background, light);
  @include theme-block-dark {
    border-color: tone(border, dark); box-shadow: $shadow-dark; background: tone(background-100, dark);
  }
}
.section-header { display:flex; align-items:center; justify-content:space-between; gap: 12px; margin-bottom: $sp-8; }
.section-title { margin: 0; font-size: clamp(1.4rem, 1rem + 1.2vw, 2rem); }
.section-sub { font-size: .95rem; color: tone(secondary, light);
  @include theme-block-dark { color: tone(secondary, dark); }
}

// Buttons
.button { @include button-base; background: tone(accent, light); color: tone(white, light);
  &:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,.12); }
  @include theme-block-dark { background: tone(white, dark); color: tone(black, dark); }
}
.button-icon { @include button-base; width: 2.25rem; height: 2.25rem; padding: $sp-4; border-radius: 50%; }
.button-sm { min-height: 2.25rem; padding: .35rem 1rem; font-size: .82rem; }
.button-transparent {
  @include button-base; background: transparent; color: tone(secondary, light); border-color: tone(border, light);
  &:hover { background: tone(background-100, light); color: tone(contrast, light); }
  @include theme-block-dark {
    color: tone(secondary, dark); border-color: tone(border, dark);
    &:hover { background: tone(background-100, dark); color: tone(contrast, dark); }
  }
}

// Utilities
.hidden { display:none !important; }
.visually-hidden {
  position:absolute !important; width:1px; height:1px; clip:rect(1px,1px,1px,1px); overflow:hidden; white-space:nowrap;
}
.mt-0 { margin-top: 0 !important; } .mb-0 { margin-bottom: 0 !important; }
.mt-6 { margin-top: $sp-6 !important; } .mb-6 { margin-bottom: $sp-6 !important; }
.pad-inline { padding-inline: 1rem; }
