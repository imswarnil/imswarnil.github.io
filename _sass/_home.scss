// ======================================================================
// Cinematic Hero — morphing, parallax, marquee, video-ready, dark-mode
// Requires token mixins: tone(), $sp-*, $radius-*, $fs-*, $shadow-*, etc.
// ======================================================================

.hero-cine {
  --hc-accent1: #5ac8fa;
  --hc-accent2: #7c5cff;

  position: relative;
  overflow: clip;
  margin: 0 auto $sp-8;
  max-width: $island-width;
  border: 1px solid;
  border-radius: $radius-6;
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);

  @include theme-block      { background: rgba(255,255,255,.70); border-color: tone(border, light); box-shadow: $shadow-light; }
  @include theme-block-dark { background: rgba(18,18,20,.74);   border-color: tone(border, dark);  box-shadow: $shadow-dark;  }

  &.has-media { background: transparent; border-color: transparent; }
}

/* Backdrop stack (video/image + gradient + grain + blobs) */
.hc-backdrop {
  position: absolute; inset: 0; z-index: 0;
  transform: translate(var(--px,0), var(--py,0)); // parallax from JS
}
.hc-media {
  position: absolute; inset: 0; border-radius: inherit;
  background-image: var(--bg);
  background-size: cover; background-position: center;
  filter: saturate(1.05) contrast(1.05) brightness(1.02);
  &.is-video, video& { object-fit: cover; width: 100%; height: 100%; display: block; }
  video { width: 100%; height: 100%; object-fit: cover; border-radius: inherit; }
}
.hc-gradient {
  position: absolute; inset: 0; border-radius: inherit;
  background: radial-gradient(120% 100% at 80% 0%, rgba(0,0,0,.15), rgba(0,0,0,.55));
  mix-blend-mode: multiply;
}
.hc-grain {
  position: absolute; inset: 0; border-radius: inherit;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/><feComponentTransfer><feFuncA type='table' tableValues='0 0 0 0 0 .05 .12 .18 .24 .3 .35 .4'/></feComponentTransfer></filter><rect width='120' height='120' filter='url(%23n)' /></svg>");
  opacity: .25; mix-blend-mode: overlay; pointer-events: none;
}
.hc-blobs {
  position: absolute; inset: -10% -10% -10% -10%; z-index: 1; pointer-events: none;
  .blob { filter: blur(40px); opacity: .55; }
  .b1 { animation: float1 12s ease-in-out infinite alternate; }
  .b2 { animation: float2 14s ease-in-out infinite alternate; }
}
@keyframes float1 { from { transform: translate(-10px, -8px) } to { transform: translate(16px, 12px) } }
@keyframes float2 { from { transform: translate(  8px, -6px) } to { transform: translate(-12px, 18px) } }

/* Inner layout */
.hc-inner {
  position: relative;
  z-index: 2;
  padding: clamp(#{$sp-8}, 4vw, #{$sp-12});
  display: grid; gap: $sp-5;
}

/* Eyebrow row */
.hc-head { display: grid; gap: $sp-4; }
.hc-eyebrow { display: flex; flex-wrap: wrap; align-items: center; gap: $sp-3; }
.hc-kicker {
  display: inline-flex; align-items: center; gap: .5em;
  padding: .34rem .6rem; border-radius: $radius-pill; border: 1px solid;
  font-size: $fs-2; letter-spacing: .02em; text-transform: uppercase;
  @include theme-block      { background: tone(surface, light);       border-color: tone(border, light); color: tone(secondary, light); }
  @include theme-block-dark { background: tone(background-100, dark); border-color: tone(border, dark);  color: tone(secondary, dark);  }
}

/* Status marquee */
.hc-status { display: inline-flex; align-items: center; gap: .5em; overflow: hidden; max-width: clamp(240px, 32vw, 440px); }
.hc-ticker { display: inline-block; white-space: nowrap; animation: ticker 22s linear infinite; }
@keyframes ticker {
  from { transform: translateX(0) } to { transform: translateX(-33.333%) }
}

/* Titles + desc with reveal */
.hc-title {
  inline-size: min(28ch, 100%);
  font-size: clamp(2.2rem, 4vw, 3.8rem);
  line-height: 1.05; letter-spacing: -0.01em;
  @include theme-block      { color: tone(contrast, light); }
  @include theme-block-dark { color: tone(contrast, dark);  }
}
.hc-desc {
  inline-size: min(64ch, 100%);
  font-size: clamp(1rem, 1.2vw, 1.15rem);
  @include theme-block      { color: tone(secondary, light); }
  @include theme-block-dark { color: tone(secondary, dark);  }
}

/* Meta, chips */
.hc-meta { display: inline-flex; flex-wrap: wrap; align-items: center; gap: $sp-3; }
.chip {
  display: inline-flex; align-items: center; gap: .55rem;
  padding: .35rem .6rem; border-radius: $radius-pill; border: 1px solid;
  @include theme-block      { background: tone(surface, light);       border-color: tone(border, light); color: tone(secondary, light); }
  @include theme-block-dark { background: tone(background-100, dark); border-color: tone(border, dark);  color: tone(secondary, dark);  }
  img { width: 26px; height: 26px; border-radius: 50%; object-fit: cover; display: block; }
}
.dot { width: 6px; height: 6px; border-radius: 50%; opacity: .5;
  @include theme-block      { background: tone(secondary, light); }
  @include theme-block-dark { background: tone(secondary, dark);  }
}
.tags { display: inline-flex; gap: $sp-2; padding: 0; margin: 0; list-style: none;
  a { text-decoration: none;
    @include theme-block      { color: tone(secondary, light); &:hover { color: tone(contrast, light); } }
    @include theme-block-dark { color: tone(secondary, dark);  &:hover { color: tone(contrast, dark);  } }
  }
}

/* Marquee focus chips scroller */
.hc-scroller { overflow: hidden; mask-image: linear-gradient(90deg, transparent, #000 12%, #000 88%, transparent); }
.hc-scroll-inner { display: inline-flex; gap: $sp-3; padding-block: $sp-2; animation: pillroll 16s linear infinite; }
@keyframes pillroll { from { transform: translateX(0) } to { transform: translateX(-50%) } }
.pill {
  padding: .35rem .7rem; border-radius: $radius-pill; border: 1px dashed;
  @include theme-block      { border-color: tone(border, light); color: tone(secondary, light); }
  @include theme-block-dark { border-color: tone(border, dark);  color: tone(secondary, dark);  }
}

/* Buttons with “magnetic” hover */
.btn {
  display: inline-flex; align-items: center; gap: .55rem;
  border-radius: $radius-pill; border: 1px solid transparent;
  min-height: 42px; padding: .6rem 1rem; cursor: pointer; text-decoration: none;
  transition: transform $dur-1 $ease-in-out, box-shadow $dur-1 $ease-in-out, background-color $dur-1;

  @include theme-block      { background: tone(contrast, light); color: tone(white, light); }
  @include theme-block-dark { background: tone(white, dark);     color: tone(black, dark);  }

  &:hover { transform: translateY(-2px); }
}
.btn--soft {
  @include theme-block      { background: tone(background-100, light); color: tone(contrast, light); }
  @include theme-block-dark { background: tone(background-100, dark);  color: tone(contrast, dark);  }
}
.btn--ghost {
  border: 1px solid;
  @include theme-block      { background: transparent; border-color: tone(border, light); color: tone(contrast, light); }
  @include theme-block-dark { background: transparent; border-color: tone(border, dark);  color: tone(contrast, dark);  }
}

/* Reveal animation (uses inline --reveal-delay) */
.will-reveal { opacity: 0; transform: translateY(6px); animation: reveal .7s $ease-in-out forwards; animation-delay: var(--reveal-delay, 0ms); }
@keyframes reveal { to { opacity: 1; transform: translateY(0) } }

/* Variants tweak */
.hero-cine.is-post .hc-title { font-size: clamp(2.2rem, 3.8vw, 3.4rem); }
.hero-cine.is-home .hc-title { font-size: clamp(2.4rem, 4.4vw, 4rem); }
.hero-cine.is-page .hc-title { font-size: clamp(2.2rem, 3.6vw, 3.2rem); }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .will-reveal, .hc-scroll-inner, .hc-ticker, .hc-blobs .blob { animation: none !important; }
}

/* Small devices */
@media (max-width: $bp-sm) {
  .hc-inner { padding: $sp-6; }
}
